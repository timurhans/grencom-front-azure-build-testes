(this["webpackJsonpgreencom-front"]=this["webpackJsonpgreencom-front"]||[]).push([[0],{136:function(e,t,o){},185:function(e,t,o){},189:function(e,t,o){"use strict";o.r(t);var a=o(1),c=o.n(a),n=o(27),r=o.n(n),s=(o(86),o(2)),i=o(70),l=o(71),d=o(4),u=o(39),j=o(5),b=o.n(j),p=o(9),m=o(72),O=o.n(m),h="https://greencomapi.azurewebsites.net";function f(e,t){var o=Object(a.useState)((function(){return function(e,t){var o=!1;try{o=JSON.parse(localStorage.getItem(e))}catch(a){o=!1}return o||t}(e,t)})),c=Object(s.a)(o,2),n=c[0],r=c[1];return Object(a.useEffect)((function(){localStorage.setItem(e,JSON.stringify(n))}),[n]),[n,r]}function x(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,c=Object(a.useState)([]),n=Object(s.a)(c,2),r=n[0],i=n[1],l=f("token",null),d=Object(s.a)(l,2),u=d[0];d[1];return Object(a.useEffect)((function(){if(""!==t){var o={produto:e,periodo:t};b()({method:"GET",headers:{Authorization:"Token "+u},url:"https://greencomapi.azurewebsites.net/periodos/",params:o}).then((function(e){i(e.data.dados)}))}}),[e,t,o]),{dadosPeriodo:r}}var v=o(0),g=function(){var e=Object(a.useRef)(null),t=f("username",null),o=Object(s.a)(t,1)[0],c=f("isRep",null),n=[{label:"Conta",icon:"pi pi-user",url:"/conta"},{label:"Pedidos",icon:"pi pi-book",url:"/pedidos"}];Object(s.a)(c,1)[0]&&(n.push({label:"Clientes",icon:"pi pi-users",url:"/clientes"}),n.push({label:"Promocoes",icon:"pi pi-percentage",url:"/promocoes"}),n.push({label:"Trade",icon:"pi pi-flag",url:"/trade"}));var r=[{label:o,items:n}];return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(l.Menu,{model:r,popup:!0,ref:e,id:"popup_menu"}),Object(v.jsx)(d.Button,{icon:"pi pi-bars",onClick:function(t){return e.current.toggle(t)},"aria-controls":"popup_menu","aria-haspopup":!0})]})};function _(e){var t=f("categorias",[]),o=Object(s.a)(t,1)[0],c=Object(a.useState)(""),n=Object(s.a)(c,2),r=n[0],l=n[1],j=f("tipoConta",[]),b=Object(s.a)(j,1)[0],p=Object(v.jsx)("a",{href:"/",children:Object(v.jsx)("img",{alt:"logo",src:"https://ondasstr092020.blob.core.windows.net/modelo/logo.png",height:"40",className:"p-mr-2"})}),m=Object(v.jsx)("a",{href:"/login",children:"Login"});return e.loggedIn&&(m=Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(u.InputText,{ref:e.searchInput,onChange:function(e){l(e.target.value),e.target.value.length>=13&&/^\d+$/.test(e.target.value)&&(e.preventDefault(),window.location="/busca?query="+e.target.value,l(""))},placeholder:"Buscar",type:"text"}),Object(v.jsx)(d.Button,{onClick:function(e){""!==r&&(e.preventDefault(),window.location="/busca?query="+r,l(""))},icon:"pi pi-search",className:"p-button-rounded p-button-secondary"}),Object(v.jsx)(d.Button,{icon:"pi pi-shopping-cart",onClick:function(e){return window.location.href="/carrinho"},"aria-controls":"popup_menu","aria-haspopup":!0}),"visitante"===b?Object(v.jsx)(d.Button,{icon:"pi pi-user",onClick:function(e){return window.location.href="/conta"},"aria-controls":"popup_menu","aria-haspopup":!0}):Object(v.jsx)(g,{})]})),Object(v.jsx)("div",{children:Object(v.jsx)("div",{className:"card",children:Object(v.jsx)(i.Menubar,{model:o,start:p,end:m})})})}var N=o(74),C=o(75),w=o(81),S=o(80),k=(o(136),o(29)),y=function(e){return Object(v.jsx)("div",{className:"product-item",children:Object(v.jsx)("div",{className:"product-item-content",children:Object(v.jsx)("div",{className:"mb-3",children:Object(v.jsx)("a",{href:e.link,children:Object(v.jsx)("img",{src:e.url_imagem,className:"product-image"})})})})})},B=function(e){Object(w.a)(o,e);var t=Object(S.a)(o);function o(e){var a;return Object(N.a)(this,o),(a=t.call(this,e)).state={banners:[]},a}return Object(C.a)(o,[{key:"componentDidMount",value:function(){this.updateBanners(),document.title="Greenish B2B"}},{key:"updateBanners",value:function(){var e=this;b()({method:"GET",url:"https://greencomapi.azurewebsites.net/home"}).then((function(t){e.setState({banners:t.data.banners}),console.log(e.state.banners)}))}},{key:"render",value:function(){return Object(v.jsx)("div",{children:Object(v.jsx)(k.Carousel,{value:this.state.banners,numVisible:1,numScroll:1,itemTemplate:y})})}}]),o}(c.a.Component),T=o(35),I=o(40),P=o.n(I),E=o(14);function A(e){var t=Object(a.useState)(""),o=Object(s.a)(t,2),c=o[0],n=o[1],r=Object(a.useState)(""),i=Object(s.a)(r,2),l=i[0],j=i[1],p=f("token",null),m=Object(s.a)(p,2),O=(m[0],m[1]),x=f("loggedin",null),g=Object(s.a)(x,2)[1],_=f("clienteId",null),N=Object(s.a)(_,2)[1],C=f("clienteNome",null),w=Object(s.a)(C,2)[1],S=f("isRep",null),k=Object(s.a)(S,2),y=(k[0],k[1]),B=f("username",null),I=Object(s.a)(B,2)[1],A=f("carrinhoId",null),z=Object(s.a)(A,2)[1],D=f("categorias",[]),q=Object(s.a)(D,2)[1],F=f("colecoes",[]),G=Object(s.a)(F,2)[1],R=f("periodos",[]),M=Object(s.a)(R,2)[1],L=f("tipoConta",[]),V=Object(s.a)(L,2)[1],H=Object(a.useRef)(null);Object(a.useEffect)((function(){document.title="Greenish B2B | Login"}),[]);return Object(v.jsxs)("div",{children:[Object(v.jsx)(E.Messages,{ref:H}),Object(v.jsxs)("div",{className:"p-field",children:[Object(v.jsx)("label",{htmlFor:"login",children:"Login"}),Object(v.jsx)(u.InputText,{id:"login",value:c,onChange:function(e){return n(e.target.value)}})]}),Object(v.jsxs)("div",{className:"p-field",children:[Object(v.jsx)("label",{htmlFor:"senha",children:"Senha"}),Object(v.jsx)(T.Password,{id:"senha",value:l,onChange:function(e){return j(e.target.value)},feedback:!1})]}),Object(v.jsx)(d.Button,{label:"Entrar",onClick:function(){return function(){var e=new FormData;e.append("username",c),e.append("password",l),b.a.post(h+"/api-token-auth/",e).then((function(e){var t={headers:{Authorization:"Token "+e.data.token}};console.log(t),O(e.data.token),b.a.get(h+"/login/",t).then((function(e){console.log(e.data),g(!0),N(e.data.clienteId),w(e.data.clienteNome),y(e.data.isRep),I(e.data.username),z(null),q(e.data.cats),G(e.data.colecoes),M(e.data.periodos),V(e.data.tipo_conta),window.location.href="/",P.a.event({action:"login",user_type:e.data.tipo_conta})}))})).catch((function(e){H.current.show([{severity:"error",summary:"Usuario ou senha Incorretos",sticky:!1}]),n(""),j("")}))}()}})]})}var z=o(28),D=o(21),q=o(7),F=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),o=t[0],n=t[1],r=f("token",null),i=Object(s.a)(r,2),l=i[0],u=(i[1],f("clienteId",null)),j=Object(s.a)(u,2)[1],p=f("clienteNome",null),m=Object(s.a)(p,2)[1],O=f("carrinhoId",null),h=Object(s.a)(O,2),x=(h[0],h[1]);Object(a.useEffect)((function(){b()({method:"GET",headers:{Authorization:"Token "+l},url:"https://greencomapi.azurewebsites.net/clientes/"}).then((function(e){console.log(e.data.clientes),n(e.data.clientes)})),document.title="Greenish B2B | Clientes"}),[]);var g=function(e,t){j(e),m(t),x(null),window.location.href="/"};return Object(v.jsx)("div",{children:Object(v.jsx)("div",{className:"card",children:Object(v.jsxs)(D.DataTable,{value:o,children:[Object(v.jsx)(q.Column,{field:"cnpj",header:"CNPJ",filter:!0,filterPlaceholder:"Buscar"}),Object(v.jsx)(q.Column,{field:"razao_social",header:"Razao Social",filter:!0,filterPlaceholder:"Buscar"}),Object(v.jsx)(q.Column,{field:"uf",header:"UF"}),Object(v.jsx)(q.Column,{field:"cidade",header:"Cidade",filter:!0,filterPlaceholder:"Buscar"}),Object(v.jsx)(q.Column,{field:"tabela_precos",header:"Tabela"}),Object(v.jsx)(q.Column,{field:"desc_cond_pag",header:"Condicao Pagamento"}),Object(v.jsx)(q.Column,{body:function(e){return Object(v.jsx)(c.a.Fragment,{children:Object(v.jsx)(d.Button,{label:"Selecionar",onClick:function(){return function(e){Object(z.confirmDialog)({message:"Itens nao salvos no carrinho serao apagados. Confirma alteracao?",header:"Confirmacao",icon:"pi pi-exclamation-triangle",acceptLabel:"Sim",rejectLabel:"Nao",accept:function(){return g(e.id,e.nome)}})}(e)}})})}})]})})})},G=o(76),R=o(10);o(168),o(170);function M(e){return null==e?"":e.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}var L=o(77),V=o.n(L),H=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),o=t[0],n=t[1],r=f("token",null),i=Object(s.a)(r,2),l=i[0],u=(i[1],f("clienteId",null)),j=Object(s.a)(u,2)[1],p=f("clienteNome",null),m=Object(s.a)(p,2)[1],O=f("carrinhoId",null),x=Object(s.a)(O,2),g=x[0],_=x[1],N=Object(a.useState)(!1),C=Object(s.a)(N,2),w=C[0],S=C[1],k=Object(a.useRef)(null),y=f("isRep",null),B=Object(s.a)(y,1)[0],T=function(){b()({method:"GET",url:"https://greencomapi.azurewebsites.net/pedidos/",headers:{Authorization:"Token "+l}}).then((function(e){n(e.data.pedidos)}))};Object(a.useEffect)((function(){T(),document.title="Greenish B2B | Pedidos"}),[]);var I=function(e,t,o){b()({method:"GET",url:h+"/pedidos/retoma/"+e+"/",headers:{Authorization:"Token "+l},params:{carrinhoAtualId:g}}).then((function(a){a.data.confirmed?(_(e),j(t),m(o),window.location.href="/carrinho"):k.current.show([{severity:"error",summary:a.data.message,sticky:!1}])}))};console.log(o);var P=function(e){return e.toLocaleString("en-US",{style:"currency",currency:"BRL"})};return Object(v.jsxs)("div",{children:[Object(v.jsx)(E.Messages,{ref:k}),Object(v.jsx)(R.Dialog,{title:"Processando",visible:w,onHide:function(){return""},children:Object(v.jsx)(G.ProgressSpinner,{})}),Object(v.jsx)("div",{className:"card",children:Object(v.jsxs)(D.DataTable,{value:o,children:[Object(v.jsx)(q.Column,{field:"cliente__razao_social",header:"Razao Social",filter:!0,filterPlaceholder:"Buscar"}),Object(v.jsx)(q.Column,{field:"colecao",header:"Colecao",filter:!0,filterPlaceholder:"Buscar"}),Object(v.jsx)(q.Column,{header:"Valor",body:function(e){return"".concat(P(e.valor_total))}}),Object(v.jsx)(q.Column,{header:"Valor Entregar",body:function(e){return"".concat(P(e.valor_total_entregar))}}),Object(v.jsx)(q.Column,{field:"qtd_total",header:"Qtd"}),Object(v.jsx)(q.Column,{field:"cliente__desc_cond_pag",header:"Cond Pag"}),Object(v.jsx)(q.Column,{body:function(e){return null==e.data_liberacao?"...":V()(e.data_liberacao,"YYYY-MM-DDTHH:mm:ssZ").format("DD/MM/YYYY")},header:"Data"}),Object(v.jsx)(q.Column,{field:"liberado_rep",header:"Liberado",body:function(e){return e.liberado_rep?Object(v.jsx)(v.Fragment,{children:"Sim"}):Object(v.jsx)(v.Fragment,{children:"N\xe3o"})}}),Object(v.jsx)(q.Column,{field:"enviado_fabrica",header:"Enviado",body:function(e){return e.enviado_fabrica?Object(v.jsx)(v.Fragment,{children:"Sim"}):Object(v.jsx)(v.Fragment,{children:"N\xe3o"})}}),Object(v.jsx)(q.Column,{field:"codigo_erp",header:"ID Ondas"}),Object(v.jsx)(q.Column,{header:"Acoes",body:function(e){return Object(v.jsxs)(c.a.Fragment,{children:[e.liberado_rep?Object(v.jsx)(d.Button,{label:"Visualizar",onClick:function(){return window.location.href="/pedido/"+e.id}}):Object(v.jsx)(d.Button,{label:"Alterar",onClick:function(){return function(e){Object(z.confirmDialog)({message:"Itens nao salvos no carrinho serao apagados. Confirma alteracao?",header:"Confirmacao",icon:"pi pi-exclamation-triangle",acceptLabel:"Sim",rejectLabel:"Nao",accept:function(){return I(e.id,e.cliente__id,e.cliente__nome)}})}(e)}}),e.liberado_rep?Object(v.jsx)(v.Fragment,{}):e.liberado_cliente&&B?Object(v.jsx)(d.Button,{label:"Processar",onClick:function(){return function(e){S(!0),b()({method:"GET",url:h+"/pedidos/processa/"+e.id+"/",headers:{Authorization:"Token "+l}}).then((function(e){S(!1),e.data.confirmed?T():k.current.show([{severity:"error",summary:e.data.message,sticky:!0}])}))}(e)}}):Object(v.jsx)(v.Fragment,{})]})}})]})})]})},J=function(){var e=f("token",null),t=Object(s.a)(e,2),o=t[0],n=(t[1],f("carrinhoId",null)),r=Object(s.a)(n,2),i=r[0],l=(r[1],Object(a.useRef)(null)),u=Object(a.useState)([]),j=Object(s.a)(u,2),p=j[0],m=j[1],O=f("clienteId",null),x=Object(s.a)(O,1)[0];Object(a.useEffect)((function(){g(),document.title="Greenish B2B | Promocoes"}),[]);var g=function(){var e=h+"/promocoes";null!=x&&(e=e+"/"+x);var t={};null!=i&&(t.carrinhoId=i),b()({method:"GET",headers:{Authorization:"Token "+o},url:e,params:t}).then((function(e){m(e.data.promocoes),console.log(e.data.promocoes)}))};return Object(v.jsxs)("div",{children:[Object(v.jsx)(E.Messages,{ref:l}),Object(v.jsx)("div",{className:"card",children:Object(v.jsxs)(D.DataTable,{value:p,resizableColumns:!0,columnResizeMode:"fit",children:[Object(v.jsx)(q.Column,{field:"descricao",header:"Promocao",style:{width:"15%"}}),Object(v.jsx)(q.Column,{field:"atingido",header:"Atingido",style:{width:"10%"}}),Object(v.jsx)(q.Column,{header:"Acoes",body:function(e){var t=e.condicoes.slice().map((function(t,a){return Object(v.jsx)(d.Button,{className:"p-mr-2",label:t.desc_condicao,onClick:function(){return function(e,t){var a=h+"/promocoes/"+i+"/";b()({method:"GET",url:a,headers:{Authorization:"Token "+o},params:{id_promocao:e,id_condicao:t}}).then((function(e){console.log(e),e.data.confirmed?l.current.show([{severity:"success",summary:e.data.message,sticky:!1}]):l.current.show([{severity:"error",summary:e.data.message,sticky:!1}])}))}(e.id_promocao,t.id)}})}));return Object(v.jsx)(c.a.Fragment,{children:t})},style:{width:"85%"}})]})}),Object(v.jsx)(d.Button,{className:"p-d-block p-mx-auto p-mt-6",label:"Remover Promo\xe7\xf5es",onClick:function(){return function(){var e=h+"/promocoes/remove/"+i+"/";b()({method:"GET",headers:{Authorization:"Token "+o},url:e}).then((function(e){l.current.show([{severity:"success",summary:"Promo\xe7\xf5es Removidas com sucesso",sticky:!1}])}))}()}})]})};o(25);function Q(e){var t=Object(a.useState)(""),o=Object(s.a)(t,2),c=o[0],n=o[1],r=Object(a.useState)(""),i=Object(s.a)(r,2),l=i[0],u=i[1],j=Object(a.useState)(""),p=Object(s.a)(j,2),m=p[0],O=p[1],x=f("token",null),g=Object(s.a)(x,2),_=g[0],N=(g[1],Object(a.useState)(!1)),C=Object(s.a)(N,2),w=C[0],S=C[1],k=Object(a.useRef)(null),y=f("tipoConta",null),B=Object(s.a)(y,1)[0];Object(a.useEffect)((function(){document.title="Greenish B2B | Conta"}),[]);return Object(v.jsxs)("div",{children:[Object(v.jsxs)(R.Dialog,{title:"Alterar Senha",visible:w,onHide:function(){return S(!1)},children:[Object(v.jsx)(E.Messages,{ref:k}),Object(v.jsx)("h5",{children:"Senha Atual"}),Object(v.jsx)(T.Password,{value:c,onChange:function(e){return n(e.target.value)},feedback:!1}),Object(v.jsx)("h5",{children:"Senha Nova"}),Object(v.jsx)(T.Password,{value:l,onChange:function(e){return u(e.target.value)},feedback:!1}),Object(v.jsx)("h5",{children:"Confirme a Nova Senha"}),Object(v.jsx)(T.Password,{value:m,onChange:function(e){return O(e.target.value)},feedback:!1}),Object(v.jsx)("h5",{}),Object(v.jsx)(d.Button,{label:"Confirmar",onClick:function(){return function(){if(l===m){var e={senhaNova:l,senhaAtual:c},t={headers:{Authorization:"Token "+_}};b.a.post(h+"/change_password/",e,t).then((function(e){e.data.confirmed?(localStorage.clear(),window.location.href="/login"):k.current.show([{severity:"error",summary:e.data.message,sticky:!1}])}))}else k.current.show([{severity:"error",summary:"Confirmacao de nova senha invalida",sticky:!1}]);n(""),u(""),O("")}()}})]}),"visitante"===B?Object(v.jsx)(v.Fragment,{}):Object(v.jsx)(d.Button,{label:"Alterar Senha",onClick:function(){return S(!0)}}),Object(v.jsx)(d.Button,{label:"Logout",onClick:function(){return function(){var e={headers:{Authorization:"Token "+_}};b.a.get(h+"/accounts/logout/",e).then((function(e){localStorage.clear(),window.location.href="/"}))}()}})]})}var U=o(26),Y=o(22),$=o(20),X=o(23),K=o(12);function W(e){var t=Object(a.useState)(!1),o=Object(s.a)(t,2),c=o[0],n=o[1];Object(a.useEffect)((function(){n(e.isBarCode)}),[e.isBarCode]);var r,i=function(){n(!1)};r=e.produto.produto__desconto>0?" - "+parseFloat(100*e.produto.produto__desconto).toFixed()+"% OFF":"";var l=Object(v.jsxs)("div",{children:[Object(v.jsx)("h4",{children:e.produto.produto__descricao}),Object(v.jsx)("p",{children:e.produto.produto__produto}),Object(v.jsx)(K.Chip,{label:M(e.produto.preco)+r})]});return Object(v.jsx)("div",{className:"p-shadow-2 p-m-2",children:Object(v.jsxs)(Y.Card,{header:l,children:[Object(v.jsx)("img",{top:!0,width:"100%",src:e.produto.produto__url_imagem,alt:"Sem Imagem"}),Object(v.jsx)("div",{className:"p-grid",children:Object(v.jsxs)("div",{className:"p-field p-col-12 p-md-3",children:[Object(v.jsx)(d.Button,{label:"Detalhes",icon:"pi pi-external-link",onClick:function(){n(!0)}}),Object(v.jsx)(R.Dialog,{header:e.produto.produto__produto,maximizable:!0,visible:c,style:{width:"75vw"},onHide:function(){return i()},children:Object(v.jsxs)("div",{className:"p-grid",children:[Object(v.jsx)("div",{className:"p-col",children:Object(v.jsx)("img",{top:!0,width:"100%",src:e.produto.produto__url_imagem,alt:"Sem Imagem"})}),Object(v.jsx)("div",{className:"p-col-fixed",style:{width:"500px"},children:Object(v.jsx)(Z,{isBarcode:e.isBarCode,searchInput:e.searchInput,onSave:i,produto:e.produto})})]})})]})})]})})}function Z(e){var t=Object(a.useState)(e.produto),o=Object(s.a)(t,1)[0],c=Object(a.useState)(e.isBarcode?"Pre-selecionados":""),n=Object(s.a)(c,2),r=n[0],i=n[1],l=Object(a.useState)({}),u=Object(s.a)(l,2),j=u[0],p=u[1],m=Object(a.useState)(0),O=Object(s.a)(m,2),g=O[0],_=O[1],N=Object(a.useState)({change:0,anterior:0,novo:0}),C=Object(s.a)(N,2),w=C[0],S=C[1],k=Object(a.useState)(Object(v.jsx)("div",{})),y=Object(s.a)(k,2),B=y[0],T=y[1],I=f("token",null),P=Object(s.a)(I,2),A=P[0],z=(P[1],f("clienteId",null)),D=Object(s.a)(z,1)[0],q=f("carrinhoId",null),F=Object(s.a)(q,2),G=F[0],M=F[1],L=Object(a.useState)(!1),V=Object(s.a)(L,2),H=V[0],J=V[1],Q=Object(a.useState)(""),U=Object(s.a)(Q,2),Y=U[0],W=U[1],Z=Object(a.useRef)(null),te=x(o.produto__produto,r).dadosPeriodo;Object(a.useEffect)((function(){var e={};for(var t in te){var a=te[t].cor,c=new Array(o.produto__qtd_tamanhos).fill(0);e[a]=c}p(e),_(0)}),[te]),Object(a.useEffect)((function(){_(g+w.change)}),[w]),Object(a.useEffect)((function(){if(""!==r){var e=te.map((function(e){return Object(v.jsx)(ee,{dados:e,pedido:j,setPedido:p,setChangePedidoTotal:S})}));T(e)}}),[j,r]);return Object(v.jsxs)("div",{children:[Object(v.jsx)(E.Messages,{ref:Z}),Object(v.jsx)($.Dropdown,{placeholder:"Selecione Per\xedodo",id:"dropdown",value:r,options:JSON.parse(e.produto.produto__periodos),onChange:function(e){return i(e.value)}}),Object(v.jsx)(K.Chip,{label:"Qtd Total Produto : "+g}),Object(v.jsxs)("div",{className:"p-grid",children:[Object(v.jsx)("div",{className:"p-col",children:"TIPO"}),Object(v.jsx)("div",{className:"p-col",children:"COR"}),function(e){return JSON.parse(e.produto.produto__tamanhos).map((function(e){return Object(v.jsx)("div",{className:"p-col-1",children:e})}))}(e)]}),B,Object(v.jsx)(d.Button,{label:"Observa\xe7\xe3o",onClick:function(){return J(!0)},className:"p-mr-2"}),Object(v.jsx)(R.Dialog,{header:"Observa\xe7\xe3o Item",visible:H,onHide:function(){return J(!1)},children:Object(v.jsx)("div",{children:Object(v.jsx)(X.InputTextarea,{rows:2,cols:50,value:Y,onChange:function(e){return W(e.target.value)}})})}),Object(v.jsx)(d.Button,{label:"Adicionar",onClick:function(){var t=0;for(var a in j){t+=j[a].reduce((function(e,t){return e+t}),0)}var c={produto:o,periodo:r,qtds:j,qtd_total:t,clienteId:D,carrinhoId:G,observacao_item:Y},n={headers:{Authorization:"Token "+A}};console.log(c),console.log(n.headers),t>0?b.a.post(h+"/carrinho/",c,n).then((function(t){t.data.confirmed?(e.onSave(),M(t.data.carrinhoId)):Z.current.show([{severity:"error",summary:t.data.message,sticky:!0}])})).catch((function(e){console.log(e.message)})):Z.current.show([{severity:"error",summary:"Quantidade deve ser maior que 0",sticky:!1}]),e.searchInput.current.focus()}})]})}function ee(e){var t=function(e,t,o){null==e&&(e=0),t.setChangePedidoTotal(0);var a=t.pedido,c=a[t.dados.cor][o];a[t.dados.cor][o]=e,t.setPedido(a),console.log("change"),console.log(e-c),t.setChangePedidoTotal({change:e-c,anterior:c,novo:e})};return Object(v.jsxs)("div",{className:"p-grid",children:[Object(v.jsx)("div",{className:"p-col",children:e.dados.desc_liberacao}),Object(v.jsx)("div",{className:"p-col",children:e.dados.cor+" - "+e.dados.desc_cor}),function(e){var o=[];if(0===Object.keys(e.pedido).length)return o.map((function(e){return e}));var a=function(){var a=c;e.dados.liberacao?o.push(Object(v.jsx)("div",{className:"p-col-1 p-mt-4",children:Object(v.jsx)(U.InputNumber,{min:0,id:e.dados.cor+a,value:e.pedido[e.dados.cor][a],onValueChange:function(o){return t(o.value,e,a)},mode:"decimal",showButtons:!0,buttonLayout:"vertical",style:{width:"2.5em"},decrementButtonClassName:"p-button-secondary",incrementButtonClassName:"p-button-secondary",incrementButtonIcon:"pi pi-plus",decrementButtonIcon:"pi pi-minus"})})):o.push(Object(v.jsx)("div",{className:"p-col-1 p-mt-4",children:Object(v.jsxs)("span",{className:"p-float-label",children:[Object(v.jsx)(U.InputNumber,{max:e.dados.qtds[a],min:0,id:e.dados.cor+a,value:e.pedido[e.dados.cor][a],onValueChange:function(o){return t(o.value,e,a)},mode:"decimal",showButtons:!0,buttonLayout:"vertical",style:{width:"2.5em"},decrementButtonClassName:"p-button-secondary",incrementButtonClassName:"p-button-secondary",incrementButtonIcon:"pi pi-plus",decrementButtonIcon:"pi pi-minus"}),Object(v.jsx)("label",{htmlFor:e.dados.cor+a,children:e.dados.qtds[a]})]})}))};for(var c in e.dados.qtds)a();return o.map((function(e){return e}))}(e)]})}var te=o(78);function oe(e){var t=Object(a.useState)(Object(v.jsx)("div",{})),o=Object(s.a)(t,2),c=o[0],n=o[1],r=Object(a.useState)(0),i=Object(s.a)(r,2),l=i[0],u=i[1],j=Object(a.useState)(12),m=Object(s.a)(j,2),x=m[0],g=m[1],_=Object(a.useState)(0),N=Object(s.a)(_,2),C=N[0],w=N[1],S=f("token",null),k=Object(s.a)(S,2),y=(k[0],k[1],f("colecao","Todas")),B=Object(s.a)(y,2),T=B[0],I=B[1],P=f("periodo","Todos"),E=Object(s.a)(P,2),A=E[0],z=E[1],D=f("orderBy","produto"),q=Object(s.a)(D,2),F=q[0],G=q[1],M=f("clienteId",null),L=Object(s.a)(M,1)[0],V=f("tamColuna",2),H=Object(s.a)(V,2),J=H[0],Q=H[1],U=Object(a.useState)("p-col-12 p-md-6 p-lg-"+J),Y=Object(s.a)(U,2),X=Y[0],K=Y[1],Z=Object(a.useState)(!1),ee=Object(s.a)(Z,2),oe=ee[0],ae=ee[1],ce=f("colecoes",[]),ne=Object(s.a)(ce,1)[0],re=f("periodos",[]),se=Object(s.a)(re,1)[0];Object(a.useEffect)((function(){document.title="Greenish B2B | Produtos"}),[]);var ie=function(e,t,o,c){var n=Object(a.useState)({}),r=Object(s.a)(n,2),i=r[0],l=r[1],d=Object(a.useState)(!1),u=Object(s.a)(d,2),j=u[0],m=u[1],x=Object(p.g)(),v=f("token",null),g=Object(s.a)(v,2),_=g[0];return g[1],Object(a.useEffect)((function(){var a=O.a.parse(window.location.search),n=h+x.pathname+"/",r=e;"Todas"===r&&(r=null);var s=t;"Todos"===s&&(s=null),b()({method:"GET",url:n,headers:{Authorization:"Token "+_},params:{query:a.query,colecao:r,periodo:s,order_by:c,clienteId:o}}).then((function(e){l(e.data),console.log(e.data.isBarCode),m(e.data.isBarCode)}))}),[x,e,t,o,c]),{produtos:i,isBarCode:j}}(T,A,L,F),le=ie.produtos,de=ie.isBarCode;console.log(de);return Object(a.useEffect)((function(){if("lista"in le){w(le.lista.length);var t,o=le.lista.slice(l,l+x);t=o.map((function(t,o){return Object(v.jsx)("div",{className:X,children:Object(v.jsx)(W,{produto:t,isBarCode:de,searchInput:e.searchInput},o)})})),n(t),window.scrollTo(0,0)}}),[le,X,l,x,de]),Object(a.useEffect)((function(){K("p-col-12 p-md-"+J+" p-lg-"+J)}),[J]),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{children:[Object(v.jsx)(d.Button,{label:"Filtrar",onClick:function(){ae(!0)},className:"p-mr-2"}),Object(v.jsx)(R.Dialog,{header:"Filtros",visible:oe,style:{width:"75vw"},onHide:function(){ae(!1)},children:Object(v.jsxs)("div",{className:"p-grid",children:[Object(v.jsxs)("div",{className:"p-col-12 p-md-6 p-lg-2",children:[Object(v.jsx)("h3",{children:"Colecao"}),Object(v.jsx)($.Dropdown,{id:"dropdown",value:T,options:ne,onChange:function(e){return I(e.value)}})]}),Object(v.jsxs)("div",{className:"p-col-12 p-md-6 p-lg-2",children:[Object(v.jsx)("h3",{children:"Periodo"}),Object(v.jsx)($.Dropdown,{id:"dropdown",value:A,options:se,onChange:function(e){return z(e.value)}})]}),Object(v.jsxs)("div",{className:"p-col-12 p-md-6 p-lg-2",children:[Object(v.jsx)("h3",{children:"Ordenar por"}),Object(v.jsx)($.Dropdown,{id:"dropdown",value:F,options:["produto","estoque","desconto"],onChange:function(e){return G(e.value)}})]}),Object(v.jsxs)("div",{className:"p-col-12 p-md-6 p-lg-2",children:[Object(v.jsx)("h3",{children:"Tamanho Imagem"}),Object(v.jsx)($.Dropdown,{id:"dropdown",value:J,options:[2,3,4,6,12],onChange:function(e){return Q(e.value)}})]})]})})]}),Object(v.jsx)("div",{className:"p-grid",children:c}),Object(v.jsx)(te.Paginator,{first:l,rows:x,totalRecords:C,rowsPerPageOptions:[12,24,36],onPageChange:function(e){u(e.first),g(e.rows)}})]})}var ae=o(79);function ce(e){var t=Object(a.useState)(!1),o=Object(s.a)(t,2),c=o[0],n=o[1],r=f("token",null),i=Object(s.a)(r,1)[0],l=Object(a.useState)(!0),u=Object(s.a)(l,2),j=u[0],p=u[1],m=Object(a.useRef)(null),O=function(){n(!1)},x=function(){b()({method:"GET",url:h+"/carrinho/delete_item/"+e.produto.id+"/",headers:{Authorization:"Token "+i}}).then((function(t){e.forceUpdate()}))},g=e.produto.preco-e.produto.desconto,_=e.produto.preco,N=Object(v.jsxs)("div",{children:[Object(v.jsx)("h4",{children:e.produto.produto__descricao+" - "+e.produto.produto__produto}),Object(v.jsx)("p",{children:"Qtd: "+e.produto.qtd_item+" | Valor: "+M(e.produto.valor_item)}),e.produto.desconto>0?Object(v.jsx)(K.Chip,{label:"Pre\xe7o: De "+M(_)+" por R$"+M(g)}):Object(v.jsx)(K.Chip,{label:"Pre\xe7o: "+M(e.produto.preco)})]});return Object(v.jsx)("div",{className:"p-shadow-2 p-m-2",children:Object(v.jsxs)(Y.Card,{header:N,children:[Object(v.jsx)(E.Messages,{ref:m}),Object(v.jsx)("img",{top:!0,width:"100%",src:e.produto.produto__url_imagem,alt:"Sem Imagem"}),Object(v.jsxs)("div",{className:"p-grid",children:[Object(v.jsx)(d.Button,{label:"Remover",onClick:function(){Object(z.confirmDialog)({message:"Confirma a exclusao do produto?",header:"Confirmacao",icon:"pi pi-exclamation-triangle",acceptLabel:"Sim",rejectLabel:"Nao",accept:function(){return x()}})}}),Object(v.jsxs)(ae.Panel,{header:"Alterar",collapsed:j,onToggle:function(e){return p(e.value)},toggleable:!0,children:[Object(v.jsx)("div",{className:"p-field p-col-12 p-md-4 p-mt-1",children:Object(v.jsxs)("span",{className:"p-float-label",children:[Object(v.jsx)($.Dropdown,{inputId:"dropdown",value:e.periodoAtual,options:JSON.parse(e.produto.periodos_alteracao),onChange:function(t){return function(t){if(console.log(t),""!==t){var o={periodo:t,produto:e.produto},a={headers:{Authorization:"Token "+i}};b.a.post(h+"/carrinho/update_periodo/"+e.produto.id+"/",o,a).then((function(t){t.data.confirmed?(p(!1),e.forceUpdate()):m.current.show([{severity:"error",summary:t.data.message,sticky:!1}])})).catch((function(e){console.log(e.message)}))}}(t.value)}}),Object(v.jsx)("label",{htmlFor:"dropdown",children:"Periodo"})]})}),Object(v.jsx)(d.Button,{label:"Alterar Quantidades",onClick:function(){n(!0)}})]})]}),Object(v.jsx)("div",{className:"p-field p-col-12 p-md-3",children:Object(v.jsx)(R.Dialog,{header:e.produto.produto__produto,maximizable:!0,visible:c,style:{width:"75vw"},onHide:function(){return O()},children:Object(v.jsxs)("div",{className:"p-grid",children:[Object(v.jsx)("div",{className:"p-col",children:Object(v.jsx)("img",{top:!0,width:"100%",src:e.produto.produto__url_imagem,alt:"Sem Imagem"})}),Object(v.jsx)("div",{className:"p-col-fixed",style:{width:"500px"},children:Object(v.jsx)(ne,{periodoAtual:e.periodoAtual,produto:e.produto,forceUpdate:e.forceUpdate,hideModal:O})})]})})})]})})}function ne(e){var t=Object(a.useState)(e.produto),o=Object(s.a)(t,1)[0],c=Object(a.useState)(e.periodoAtual),n=Object(s.a)(c,1)[0],r=Object(a.useState)({}),i=Object(s.a)(r,2),l=i[0],u=i[1],j=Object(a.useRef)(null),p=Object(a.useState)(Object(v.jsx)("div",{})),m=Object(s.a)(p,2),O=m[0],g=m[1],_=f("clienteId",null),N=Object(s.a)(_,1)[0],C=f("carrinhoId",null),w=Object(s.a)(C,1)[0],S=Object(a.useState)(!1),k=Object(s.a)(S,2),y=k[0],B=k[1],T=Object(a.useState)(e.produto.observacao_item),I=Object(s.a)(T,2),P=I[0],A=I[1],z=f("token",null),D=Object(s.a)(z,1)[0],q=x(o.produto__produto,n).dadosPeriodo;Object(a.useEffect)((function(){var e=function(e,t){var o={},a=JSON.parse(t.qtds),c=!1;for(var n in e){var r=e[n],i=r.cor,l=new Array(t.produto__qtd_tamanhos).fill(0);if(i in a)if(r.liberacao)l=a[i];else{var d=se(a[i],r.qtds),u=Object(s.a)(d,2);l=u[0],u[1]&&(c=!0)}o[i]=l}return[o,c]}(q,o),t=Object(s.a)(e,2),a=t[0];t[1];u(a)}),[q]),Object(a.useEffect)((function(){if(""!==n){var e=q.map((function(e){return Object(v.jsx)(re,{dados:e,pedido:l,setPedido:u})}));g(e)}}),[l]);return Object(v.jsxs)("div",{children:[Object(v.jsx)(E.Messages,{ref:j}),Object(v.jsxs)("div",{className:"p-grid",children:[Object(v.jsx)("div",{className:"p-col",children:"TIPO"}),Object(v.jsx)("div",{className:"p-col",children:"COR"}),JSON.parse(o.produto__tamanhos).map((function(e){return Object(v.jsx)("div",{className:"p-col-1",children:e})}))]}),O,Object(v.jsx)(d.Button,{label:"Observa\xe7\xe3o",onClick:function(){return B(!0)},className:"p-mr-2"}),Object(v.jsx)(R.Dialog,{header:"Observa\xe7\xe3o Item",visible:y,onHide:function(){return B(!1)},children:Object(v.jsx)("div",{children:Object(v.jsx)(X.InputTextarea,{rows:2,cols:50,value:P,onChange:function(e){return A(e.target.value)}})})}),Object(v.jsx)(d.Button,{label:"Alterar",onClick:function(){var t=0;for(var a in l){t+=l[a].reduce((function(e,t){return e+t}),0)}var c={produto:o,qtds:l,qtd_total:t,clienteId:N,carrinhoId:w,observacao_item:P},n={headers:{Authorization:"Token "+D}};b.a.post(h+"/carrinho/update_qtds/"+o.id+"/",c,n).then((function(t){t.data.confirmed?(j.current.show([{severity:"success",summary:t.data.message,sticky:!0}]),e.forceUpdate(),e.hideModal()):j.current.show([{severity:"error",summary:t.data.message,sticky:!0}])})).catch((function(e){console.log(e.message)}))}})]})}function re(e){var t=function(e,t,o){var a=t.pedido;a[t.dados.cor][o]=e,t.setPedido(a)};return Object(v.jsxs)("div",{className:"p-grid",children:[Object(v.jsx)("div",{className:"p-col",children:e.dados.desc_liberacao}),Object(v.jsx)("div",{className:"p-col",children:e.dados.cor+" - "+e.dados.desc_cor}),function(e){var o=[];if(0===Object.keys(e.pedido).length)return o.map((function(e){return e}));var a=function(){var a=c;e.dados.liberacao?o.push(Object(v.jsx)("div",{className:"p-col-1 p-mt-4",children:Object(v.jsx)(U.InputNumber,{min:0,id:e.dados.cor+a,value:e.pedido[e.dados.cor][a],onValueChange:function(o){return t(o.value,e,a)},mode:"decimal",showButtons:!0,buttonLayout:"vertical",style:{width:"2.5em"},decrementButtonClassName:"p-button-secondary",incrementButtonClassName:"p-button-secondary",incrementButtonIcon:"pi pi-plus",decrementButtonIcon:"pi pi-minus"})})):o.push(Object(v.jsx)("div",{className:"p-col-1 p-mt-4",children:Object(v.jsxs)("span",{className:"p-float-label",children:[Object(v.jsx)(U.InputNumber,{max:e.dados.qtds[a],min:0,id:e.dados.cor+a,value:e.pedido[e.dados.cor][a],onValueChange:function(o){return t(o.value,e,a)},mode:"decimal",showButtons:!0,buttonLayout:"vertical",style:{width:"2.5em"},decrementButtonClassName:"p-button-secondary",incrementButtonClassName:"p-button-secondary",incrementButtonIcon:"pi pi-plus",decrementButtonIcon:"pi pi-minus"}),Object(v.jsx)("label",{htmlFor:e.dados.cor+a,children:e.dados.qtds[a]})]})}))};for(var c in e.dados.qtds)a();return o.map((function(e){return e}))}(e)]})}function se(e,t){var o=[],a=!1;for(var c in e){t[c]-e[c]<0?(o.push(t[c]),a=!0):o.push(e[c])}return[o,a]}o(178),o(180),o(182);function ie(){var e=Object(a.useState)(Object(v.jsx)("div",{})),t=Object(s.a)(e,2),o=t[0],c=t[1],n=Object(a.useState)(0),r=Object(s.a)(n,2),i=r[0],l=r[1],u=f("clienteId",null),j=Object(s.a)(u,2),p=j[0],m=j[1],O=f("clienteNome",null),x=Object(s.a)(O,2),g=(x[0],x[1]),_=f("carrinhoId",null),N=Object(s.a)(_,2),C=N[0],w=N[1],S=f("token",null),k=Object(s.a)(S,2),y=k[0],B=(k[1],f("isRep",null)),T=Object(s.a)(B,2),I=T[0],P=(T[1],Object(a.useState)(!1)),E=Object(s.a)(P,2),A=E[0],z=E[1],D=Object(a.useState)("Real"),q=Object(s.a)(D,2),F=q[0],G=(q[1],f("tipoConta",null)),L=Object(s.a)(G,1)[0],V=function(e,t){var o=Object(a.useState)([]),c=Object(s.a)(o,2),n=c[0],r=c[1],i=Object(a.useState)(0),l=Object(s.a)(i,2),d=l[0],u=l[1],j=Object(a.useState)(0),p=Object(s.a)(j,2),m=p[0],O=p[1],h=Object(a.useState)(""),x=Object(s.a)(h,2),v=x[0],g=x[1],_=Object(a.useState)(""),N=Object(s.a)(_,2),C=N[0],w=N[1],S=Object(a.useState)(null),k=Object(s.a)(S,2),y=k[0],B=k[1],T=f("carrinhoId",null),I=Object(s.a)(T,2),P=I[0],E=I[1],A=f("token",null),z=Object(s.a)(A,2),D=z[0];return z[1],Object(a.useEffect)((function(){var e={carrinhoId:P,clienteId:t};b()({method:"GET",headers:{Authorization:"Token "+D},url:"https://greencomapi.azurewebsites.net/carrinho/",params:e}).then((function(e){console.log(e.data),e.data.confirmed&&E(e.data.carrinhoId),r(e.data.dados),g(e.data.observacoes),w(e.data.razao_social),B(e.data.message),u(e.data.valor_total),O(e.data.qtd_total)}))}),[e,P,v,d,m,C]),{carrinho:n,emptyMessage:y,observacoes:v,valorTotal:d,qtdTotal:m,razaoSocial:C}}(i,p),H=V.carrinho,J=V.emptyMessage,Q=V.observacoes,U=V.valorTotal,Y=V.qtdTotal,$=V.razaoSocial,W=Object(a.useState)(""),Z=Object(s.a)(W,2),ee=Z[0],te=Z[1],oe=function(){l((function(e){return e+1}))};Object(a.useEffect)((function(){document.title="Greenish B2B | Carrinho"}),[]),Object(a.useEffect)((function(){te(Q)}),[Q]),Object(a.useEffect)((function(){var e=H,t=Object(v.jsx)("div",{className:"p-col-12 p-md-6 p-lg-3"});e.length>0&&(t=e.map((function(e,t){return Object(v.jsx)("div",{className:"p-col-12 p-md-12 p-lg-12",children:Object(v.jsx)(le,{forceUpdate:oe,periodoAtual:e.periodo,qtd_periodo:e.qtd_periodo,valor_periodo:e.valor_periodo,itens:e.itens},t)})}))),c(t)}),[H,J,C,i]);return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("p",{children:J}),Object(v.jsx)(K.Chip,{label:"Cliente: "+$}),Object(v.jsx)(K.Chip,{label:"Quantidade Total: "+Y}),Object(v.jsx)(K.Chip,{label:"Valor Total: "+M(U)}),Object(v.jsx)(d.Button,{label:"Salvar",onClick:function(){return z(!0)},className:"p-button-rounded p-mr-2"}),Object(v.jsxs)(R.Dialog,{header:"Observacoes",visible:A,onHide:function(){return z(!1)},children:[Object(v.jsx)("div",{children:Object(v.jsx)(X.InputTextarea,{rows:10,cols:50,value:ee,onChange:function(e){return te(e.target.value)}})}),Object(v.jsx)("div",{children:Object(v.jsx)(d.Button,{label:"Salvar",className:"p-d-block p-mx-auto p-mt-2",onClick:function(){return function(){if("visitante"===L)b()({method:"GET",url:h+"/pedidos/gera_pdf/"+C+"/",headers:{Authorization:"Token "+y}}).then((function(e){e.data.confirmed?window.open(h+"/"+e.data.file,"popUpWindow"):console.log(e.data)}));else{var e=!1;"Teste"===F&&(e=!0),b()({method:"GET",url:h+"/pedidos/salva/"+C+"/",headers:{Authorization:"Token "+y},params:{observacoes:ee,isTeste:e}}).then((function(e){e.data.confirmed?(I?(m(null),g(null),w(null)):w(null),window.location.href="/pedidos"):console.log(e.data)}))}}()}})})]}),Object(v.jsx)("div",{className:"p-grid",children:o})]})}function le(e){var t,o=e.itens.slice();return t=o.map((function(t,o){return Object(v.jsx)("div",{className:"p-col-6 p-md-6 p-lg-2",children:Object(v.jsx)(ce,{periodoAtual:e.periodoAtual,forceUpdate:e.forceUpdate,produto:t},o)})})),Object(v.jsxs)(Y.Card,{title:e.periodoAtual,children:[Object(v.jsx)("p",{children:"Quantidade Periodo: "+e.qtd_periodo+" | Valor Periodo: "+M(e.valor_periodo)}),Object(v.jsx)("div",{className:"p-grid",children:t})]})}function de(e){var t=Object(a.useState)(!1),o=Object(s.a)(t,2),c=o[0],n=o[1],r=f("token",null),i=(Object(s.a)(r,1)[0],Object(a.useState)(!0)),l=Object(s.a)(i,2),u=(l[0],l[1],Object(a.useRef)(null)),j=function(){n(!1)},b=e.produto.preco-e.produto.desconto,p=e.produto.preco,m=Object(v.jsxs)("div",{children:[Object(v.jsx)("h4",{children:e.produto.produto__descricao+" - "+e.produto.produto__produto}),Object(v.jsx)("p",{children:"Qtd: "+e.produto.qtd_item+" | Valor: "+M(e.produto.valor_item)}),Object(v.jsx)("p",{children:"Qtd Entregar: "+e.produto.qtd_item_entregar}),e.produto.desconto>0?Object(v.jsx)(K.Chip,{label:"Pre\xe7o: De "+M(p)+" por R$"+M(b)}):Object(v.jsx)(K.Chip,{label:"Pre\xe7o: "+M(e.produto.preco)})]});return Object(v.jsx)("div",{className:"p-shadow-2 p-m-2",children:Object(v.jsxs)(Y.Card,{header:m,children:[Object(v.jsx)(E.Messages,{ref:u}),Object(v.jsx)("img",{top:!0,width:"100%",src:e.produto.produto__url_imagem,alt:"Sem Imagem"}),Object(v.jsx)("div",{className:"p-grid",children:Object(v.jsx)(d.Button,{label:"Detalhes",onClick:function(){n(!0)},className:"p-mr-2"})}),Object(v.jsx)("div",{className:"p-field p-col-12 p-md-3",children:Object(v.jsx)(R.Dialog,{header:e.produto.produto__produto,maximizable:!0,visible:c,style:{width:"75vw"},onHide:function(){return j()},children:Object(v.jsxs)("div",{className:"p-grid",children:[Object(v.jsx)("div",{className:"p-col",children:Object(v.jsx)("img",{top:!0,width:"100%",src:e.produto.produto__url_imagem,alt:"Sem Imagem"})}),Object(v.jsx)("div",{className:"p-col-fixed",style:{width:"500px"},children:Object(v.jsx)(ue,{periodoAtual:e.periodoAtual,produto:e.produto,hideModal:j})})]})})})]})})}function ue(e){var t=Object(a.useState)(e.produto),o=Object(s.a)(t,1)[0],c=Object(a.useState)(e.periodoAtual),n=Object(s.a)(c,1)[0],r=Object(a.useState)({}),i=Object(s.a)(r,2),l=(i[0],i[1],Object(a.useRef)(null)),d=Object(a.useState)(Object(v.jsx)("div",{})),u=Object(s.a)(d,2),j=u[0],b=u[1];Object(a.useEffect)((function(){var e=function(e){var t={},o=JSON.parse(e.qtds);for(var a in t=[],o){var c={};c.cor=a,c.qtds=o[a],t.push(c)}return t}(o),t=JSON.parse(o.qtds);if(""!==n){console.log(t);var a=e.map((function(e){return Object(v.jsx)(je,{dados:e,pedido:t})}));b(a)}}),[]);return Object(v.jsxs)("div",{children:[Object(v.jsx)(E.Messages,{ref:l}),Object(v.jsxs)("div",{className:"p-grid",children:[Object(v.jsx)("div",{className:"p-col",children:"COR"}),JSON.parse(o.produto__tamanhos).map((function(e){return Object(v.jsx)("div",{className:"p-col-1",children:e})}))]}),j]})}function je(e){return Object(v.jsxs)("div",{className:"p-grid",children:[Object(v.jsx)("div",{className:"p-col",children:e.dados.cor}),function(e){var t=[];if(0===Object.keys(e.pedido).length)return t.map((function(e){return e}));for(var o in e.dados.qtds){var a=o;t.push(Object(v.jsx)("div",{className:"p-col-1 p-mt-4",children:Object(v.jsx)(U.InputNumber,{min:0,id:e.dados.cor+a,disabled:!0,value:e.pedido[e.dados.cor][a],mode:"decimal",showButtons:!0,buttonLayout:"vertical",style:{width:"2.5em"},decrementButtonClassName:"p-button-secondary",incrementButtonClassName:"p-button-secondary",incrementButtonIcon:"pi pi-plus",decrementButtonIcon:"pi pi-minus"})}))}return t.map((function(e){return e}))}(e)]})}function be(){var e=Object(a.useState)(Object(v.jsx)("div",{})),t=Object(s.a)(e,2),o=t[0],c=t[1],n=f("token",null),r=Object(s.a)(n,2),i=r[0],l=(r[1],Object(a.useState)([])),d=Object(s.a)(l,2),u=d[0],j=d[1],p=Object(a.useState)(null),m=Object(s.a)(p,2),O=m[0],x=m[1],g=Object(a.useState)(null),_=Object(s.a)(g,2),N=_[0],C=_[1],w=Object(a.useState)(null),S=Object(s.a)(w,2),k=S[0],y=S[1],B=Object(a.useState)(null),T=Object(s.a)(B,2),I=T[0],P=T[1],E=Object(a.useState)(null),A=Object(s.a)(E,2),z=A[0],D=A[1],q=Object(a.useState)(null),F=Object(s.a)(q,2),G=F[0],R=F[1];return Object(a.useEffect)((function(){document.title="Greenish B2B | Carrinho";var e=window.location.href,t=e.substring(e.lastIndexOf("/")+1),o=h+"/pedido/"+t;b()({method:"GET",headers:{Authorization:"Token "+i},url:o}).then((function(e){console.log(e.data),e.data.confirmed&&(j(e.data.dados),R(e.data.razao_social),x(e.data.message),C(e.data.valor_total),y(e.data.qtd_total),P(e.data.valor_total_entregar),D(e.data.qtd_total_entregar)),console.log(e.data.dados)}))}),[]),Object(a.useEffect)((function(){var e=u,t=Object(v.jsx)("div",{className:"p-col-12 p-md-6 p-lg-3"});e.length>0&&(t=e.map((function(e,t){return Object(v.jsx)("div",{className:"p-col-12 p-md-12 p-lg-12",children:Object(v.jsx)(pe,{periodoAtual:e.periodo,qtd_periodo:e.qtd_periodo,valor_periodo:e.valor_periodo,qtd_periodo_entregar:e.qtd_periodo_entregar,valor_periodo_entregar:e.valor_periodo_entregar,itens:e.itens},t)})}))),c(t)}),[u,O]),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("p",{children:O}),Object(v.jsx)(K.Chip,{label:"Cliente: "+G}),Object(v.jsx)(K.Chip,{label:"Quantidade Total: "+k}),Object(v.jsx)(K.Chip,{label:"Quantidade a Total Entregar: "+z}),Object(v.jsx)(K.Chip,{label:"Valor Total: "+M(N)}),Object(v.jsx)(K.Chip,{label:"Valor Total a Entregar: "+M(I)}),Object(v.jsx)("div",{className:"p-grid",children:o})]})}function pe(e){console.log(e);var t,o=e.itens.slice();return t=o.map((function(t,o){return Object(v.jsx)("div",{className:"p-col-6 p-md-6 p-lg-2",children:Object(v.jsx)(de,{periodoAtual:e.periodoAtual,produto:t},o)})})),Object(v.jsxs)(Y.Card,{title:e.periodoAtual,children:[Object(v.jsx)("p",{children:"Quantidade Periodo: "+e.qtd_periodo+" | Valor Periodo: "+M(e.valor_periodo)}),Object(v.jsx)("p",{children:"Quantidade Periodo a Entregar: "+e.qtd_periodo_entregar+" | Valor Periodo a Entregar: "+M(e.valor_periodo_entregar)}),Object(v.jsx)("div",{className:"p-grid",children:t})]})}o(185);var me=function(){var e=f("token",null),t=Object(s.a)(e,2),o=t[0],c=(t[1],Object(a.useState)([])),n=Object(s.a)(c,2),r=n[0],i=n[1],l=Object(a.useState)([]),u=Object(s.a)(l,2),j=u[0],p=u[1],m=Object(a.useState)(null),O=Object(s.a)(m,2),x=O[0],g=O[1],_=Object(a.useState)({}),N=Object(s.a)(_,2),C=N[0],w=N[1],S=Object(a.useState)({}),y=Object(s.a)(S,2),B=y[0],T=y[1],I=Object(a.useState)(!1),P=Object(s.a)(I,2),E=P[0],A=P[1],z=Object(a.useState)(!1),D=Object(s.a)(z,2),q=D[0],F=D[1],G=Object(a.useState)(""),M=Object(s.a)(G,2),L=M[0],V=M[1],H=[{breakpoint:"1024px",numVisible:3,numScroll:3},{breakpoint:"600px",numVisible:2,numScroll:2},{breakpoint:"480px",numVisible:1,numScroll:1}];Object(a.useEffect)((function(){document.title="Greenish B2B | Trade Marketing";b()({method:"GET",headers:{Authorization:"Token "+o},url:"https://greencomapi.azurewebsites.net/trade/get_materiais"}).then((function(e){console.log(e.data),e.data.confirmed&&(i(e.data.materiais),p(e.data.clientes)),console.log(e.data.clientes)}))}),[]);return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"p-grid",children:[Object(v.jsxs)("div",{className:"p-col-12",children:[Object(v.jsx)("h4",{children:"Cliente"}),Object(v.jsx)($.Dropdown,{placeholder:"Selecione Cliente",id:"dropdown",value:x,options:j,onChange:function(e){return g(e.value)},optionLabel:"razao_social"})]}),Object(v.jsxs)("div",{className:"p-col-6",children:[Object(v.jsxs)("h4",{children:["Material: ",C.descricao]}),Object(v.jsxs)("div",{className:"card",children:[Object(v.jsx)("div",{className:"p-grid",children:Object(v.jsx)("div",{className:"p-col-12",children:Object(v.jsx)("img",{src:"https://ondasstr092020.blob.core.windows.net/greencom/".concat(B.imagem_material_opcao),style:{height:"200px"},alt:"escolher",className:"product-image"})})}),Object(v.jsx)("div",{className:"p-col-12",children:Object(v.jsx)("p",{children:C.descricao_longa})})]})]}),Object(v.jsx)("div",{className:"p-col-6"}),Object(v.jsx)("div",{className:"p-col-3",children:null==B.descricao_opcao?Object(v.jsx)(d.Button,{label:"Escolher Material",onClick:function(){return F(!0)}}):Object(v.jsx)(d.Button,{label:"Alterar Material",onClick:function(){return F(!0)}})}),Object(v.jsx)("div",{className:"p-col-9"}),Object(v.jsxs)("div",{className:"p-col-12",children:[Object(v.jsx)("h4",{children:"Observacoes"}),Object(v.jsx)(X.InputTextarea,{rows:5,cols:100,value:L,onChange:function(e){return V(e.target.value)}})]})]}),Object(v.jsx)(R.Dialog,{header:"Escolha material",visible:q,style:{width:"75vw"},onHide:function(){return F(!1)},children:Object(v.jsx)("div",{className:"carousel-demo",children:Object(v.jsx)("div",{className:"card",children:Object(v.jsx)(k.Carousel,{value:r,numVisible:2,numScroll:1,responsiveOptions:H,className:"custom-carousel",circular:!0,itemTemplate:function(e){return Object(v.jsx)("div",{className:"product-item",children:Object(v.jsxs)("div",{className:"product-item-content",children:[Object(v.jsx)("div",{className:"mb-3",children:Object(v.jsx)("img",{src:"https://ondasstr092020.blob.core.windows.net/greencom/".concat(e.imagem_material),alt:e.descricao,className:"product-image"})}),Object(v.jsxs)("div",{children:[Object(v.jsx)("h4",{className:"mb-1",children:e.descricao}),Object(v.jsx)("h6",{className:"mt-0 mb-3",children:e.descricao_longa}),Object(v.jsx)("div",{className:"car-buttons mt-5",children:Object(v.jsx)(d.Button,{icon:"pi pi-pencil",onClick:function(){return function(e){w(e),A(!0)}(e)},className:"p-button p-button-rounded mr-2"})})]})]})})},header:Object(v.jsx)("h5",{children:"Teste"})})})})}),Object(v.jsx)(R.Dialog,{header:"Escolha opcao de material",visible:E,style:{width:"75vw"},onHide:function(){return A(!1)},children:Object(v.jsx)("div",{className:"carousel-demo",children:Object(v.jsx)("div",{className:"card",children:Object(v.jsx)(k.Carousel,{value:C.opcoes,numVisible:3,numScroll:1,responsiveOptions:H,className:"custom-carousel",circular:!0,itemTemplate:function(e){return Object(v.jsx)("div",{className:"product-item",children:Object(v.jsxs)("div",{className:"product-item-content",children:[Object(v.jsx)("div",{className:"mb-3",children:Object(v.jsx)("img",{src:"https://ondasstr092020.blob.core.windows.net/greencom/".concat(e.imagem_material_opcao),alt:e.descricao,className:"product-image"})}),Object(v.jsxs)("div",{children:[Object(v.jsx)("h4",{className:"mb-1",children:e.descricao_opcao}),Object(v.jsx)("h6",{className:"mt-0 mb-3",children:"Prazo de Envio: ".concat(e.prazo_envio," dias")}),Object(v.jsx)("div",{className:"car-buttons mt-5",children:Object(v.jsx)(d.Button,{icon:"pi pi-pencil",className:"p-button p-button-rounded mr-2",onClick:function(){return function(e){T(e),A(!1),F(!1)}(e)}})})]})]})})}})})})}),Object(v.jsx)(d.Button,{label:"Salvar",className:"p-d-block p-mx-auto p-mt-2",onClick:function(){b()({method:"GET",url:h+"/trade/salva_solicitacao",headers:{Authorization:"Token "+o},params:{observacoes:L,clienteId:x.id,materialOpcaoId:B.id}}).then((function(e){e.data.confirmed?window.location.href="/trade/solicitacoes":console.log(e.data)}))}})]})},Oe=function(){var e=f("token",null),t=Object(s.a)(e,2),o=t[0],n=(t[1],Object(a.useState)([])),r=Object(s.a)(n,2),i=r[0],l=r[1],u=Object(a.useState)({}),j=Object(s.a)(u,2),p=j[0],m=j[1],O=Object(a.useState)(!1),h=Object(s.a)(O,2),x=h[0],g=h[1];Object(a.useEffect)((function(){b()({method:"GET",headers:{Authorization:"Token "+o},url:"https://greencomapi.azurewebsites.net/trade/get_solicitacoes"}).then((function(e){console.log(e.data.solicitacoes),l(e.data.solicitacoes)})),document.title="Greenish B2B | Trade"}),[]);return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(R.Dialog,{header:"Detalhes Solicitacao",visible:x,style:{width:"75vw"},onHide:function(){return g(!1)},children:[Object(v.jsxs)("div",{className:"p-grid",children:[Object(v.jsxs)("div",{className:"p-col-6",children:[Object(v.jsxs)("h4",{children:["Material: ",p.material]}),Object(v.jsxs)("div",{className:"card",children:[Object(v.jsx)("div",{className:"p-grid",children:Object(v.jsx)("div",{className:"p-col-12",children:Object(v.jsx)("img",{src:"https://ondasstr092020.blob.core.windows.net/greencom/".concat(p.material_opcao_imagem),style:{height:"200px"},alt:"escolher",className:"product-image"})})}),Object(v.jsx)("div",{className:"p-col-12",children:Object(v.jsx)("p",{children:p.material_descricao_longa})})]})]}),Object(v.jsx)("div",{className:"p-col-6"})]}),Object(v.jsx)("h5",{children:"Observacoes"}),Object(v.jsx)(X.InputTextarea,{value:p.observacoes,rows:5,cols:30,disabled:!0}),Object(v.jsx)(k.Carousel,{value:p.imagens,numVisible:3,numScroll:1,circular:!0,itemTemplate:function(e){return Object(v.jsx)("div",{className:"product-item",children:Object(v.jsx)("div",{className:"product-item-content",children:Object(v.jsx)("div",{className:"mb-3",children:Object(v.jsx)("img",{src:"https://ondasstr092020.blob.core.windows.net/greencom/".concat(e.imagem_solicitacao_trade),alt:"Sem Imagem",className:"product-image"})})})})},header:Object(v.jsx)("h5",{children:"Imagens"})})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)(d.Button,{label:"Fazer nova solicitacao",onClick:function(){return window.location.href="/trade/solicitacao"},className:"p-button p-button-rounded mr-2"}),Object(v.jsx)("div",{className:"card",children:Object(v.jsxs)(D.DataTable,{value:i,children:[Object(v.jsx)(q.Column,{field:"cliente__razao_social",header:"Cliente",filter:!0,filterPlaceholder:"Buscar"}),Object(v.jsx)(q.Column,{field:"material",header:"Material"}),Object(v.jsx)(q.Column,{field:"status",header:"Status"}),Object(v.jsx)(q.Column,{field:"data_solicitacao",header:"Data Solicitacao"}),Object(v.jsx)(q.Column,{field:"previsao_envio",header:"Previsao Envio"}),Object(v.jsx)(q.Column,{body:function(e){return Object(v.jsx)(c.a.Fragment,{children:Object(v.jsx)(d.Button,{label:"Visualizar",onClick:function(){return function(e){m(e),g(!0)}(e)}})})}})]})})]})]})},he=function(){var e=f("token",null),t=Object(s.a)(e,2),o=t[0],n=(t[1],f("carrinhoId",null)),r=Object(s.a)(n,2),i=r[0],l=(r[1],Object(a.useRef)(null)),u=Object(a.useState)([]),j=Object(s.a)(u,2),p=j[0],m=j[1];Object(a.useEffect)((function(){O(),document.title="Greenish B2B | Promocoes"}),[]);var O=function(){b()({method:"GET",headers:{Authorization:"Token "+o},url:"https://greencomapi.azurewebsites.net/promocoes"}).then((function(e){m(e.data.promocoes),console.log(e.data.promocoes)}))};return Object(v.jsxs)("div",{children:[Object(v.jsx)(E.Messages,{ref:l}),Object(v.jsx)("div",{className:"card",children:Object(v.jsxs)(D.DataTable,{value:p,children:[Object(v.jsx)(q.Column,{field:"descricao",header:"Promocao"}),Object(v.jsx)(q.Column,{header:"Acoes",body:function(e){var t=e.condicoes.slice().map((function(t,a){return Object(v.jsx)(d.Button,{className:"p-mr-2",label:e.tipo_condicao+" - "+t.condicao,onClick:function(){return function(e,t){var a=h+"/promocoes/"+i;b()({method:"GET",url:a,headers:{Authorization:"Token "+o},params:{id_promocao:e,id_condicao:t}}).then((function(e){l.current.show([{severity:"success",summary:"Promo\xe7\xe3o computada com sucesso",sticky:!1}])}))}(e.id_promocao,t.id)}})}));return Object(v.jsx)(c.a.Fragment,{children:t})}})]})}),Object(v.jsx)(d.Button,{className:"p-d-block p-mx-auto p-mt-6",label:"Remover Promo\xe7\xf5es",onClick:function(){return function(){var e=h+"/promocoes/remove/"+i;b()({method:"GET",headers:{Authorization:"Token "+o},url:e}).then((function(e){l.current.show([{severity:"success",summary:"Promo\xe7\xf5es Removidas com sucesso",sticky:!1}])}))}()}})]})},fe=o(45);var xe=function(){var e=Object(a.useState)(function(){var e=JSON.parse(localStorage.getItem("loggedin"));return null==e&&(e=!1),e}()),t=Object(s.a)(e,2),o=t[0],c=(t[1],Object(a.useRef)(null));return Object(v.jsx)("div",{children:Object(v.jsx)("div",{children:Object(v.jsx)(fe.a,{children:Object(v.jsxs)("div",{children:[Object(v.jsx)("nav",{children:Object(v.jsx)(_,{searchInput:c,loggedIn:o})}),Object(v.jsxs)(p.d,{children:[Object(v.jsx)(p.b,{path:"/login",component:A}),Object(v.jsx)(p.b,{path:"/clientes",component:F}),Object(v.jsx)(p.b,{path:"/pedidos",component:H}),Object(v.jsx)(p.b,{path:"/promocoes",component:J}),Object(v.jsx)(p.b,{path:"/conta",component:Q}),Object(v.jsx)(p.b,{path:"/carrinho",component:ie}),Object(v.jsx)(p.b,{path:"/trade/solicitacao",component:me}),Object(v.jsx)(p.b,{path:"/trade",component:Oe}),Object(v.jsx)(p.b,{path:"/busca",children:Object(v.jsx)(oe,{searchInput:c})}),Object(v.jsx)(p.b,{path:"/teste",component:he}),Object(v.jsx)(p.b,{path:"/pedido/:idPedido",component:be}),Object(v.jsx)(p.b,{path:"/:linha/:categoria/:subcategoria",children:o?Object(v.jsx)(oe,{searchInput:c}):Object(v.jsx)(p.a,{to:"/login"})}),Object(v.jsx)(p.b,{path:"/:linha/:categoria",children:o?Object(v.jsx)(oe,{searchInput:c}):Object(v.jsx)(p.a,{to:"/login"})}),Object(v.jsx)(p.b,{path:"/",component:B})]})]})})})})},ve=function(e){e&&e instanceof Function&&o.e(3).then(o.bind(null,190)).then((function(t){var o=t.getCLS,a=t.getFID,c=t.getFCP,n=t.getLCP,r=t.getTTFB;o(e),a(e),c(e),n(e),r(e)}))};o(186),o(187),o(188);P.a.initialize("G-XGGNKTY87X"),r.a.render(Object(v.jsx)(c.a.StrictMode,{children:Object(v.jsx)(xe,{})}),document.getElementById("root")),ve()},86:function(e,t,o){}},[[189,1,2]]]);
//# sourceMappingURL=main.84c304c3.chunk.js.map